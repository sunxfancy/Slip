Slip详细设计
===========


### 对象基本结构

Slip对象是可以被托管堆自动内存管理的对象，具有标识位，回收链等结构。
对象内部也记录有基本类型

对象主要内存由系统堆分配，托管堆中存入引用，但托管堆中的内存也需要释放。
对象的基本类型有：
list块、字符串、Table、线程

对象的定义如下:

```
struct slip_Obj {
	slip_Obj* next; // 垃圾回收链表
	byte_st mark;   // 垃圾回收标记位
	byte_st type;   // 类型标记
};
```



### GC模型详细设计

采用分代增量式垃圾回收器

首先对象分为新生代和老年代, 新生代经常被扫描, 老年代偶尔被扫到.
mark高4位用来记录存活年代,判断是新生代还是老年代, 后四位用来标记白,灰,黑三色

只回收新生代的垃圾回收的步骤为:

1. 从垃圾回收根节点入手, 从扫描符号栈, 垃圾回收状态转为准备期
2. 如果扫到的节点是新生代, 标记为灰, 这步完成后, 垃圾回收转入增量过程
3. 增量式扫描, 如果为灰, 扫描其全部孩子节点, 即其引用的对象, 将孩子置为灰, 全部孩子扫描后, 自己置为黑
4. 待增量式全部完成后, 找不到灰元素时, 垃圾回收转入回收期
5. 回收全部新生代白对象, 跳过老年代白对象
6. 存活下来的新生代年代+1, 存活4轮GC下来的元素统一转入老年代, 全部元素置为白色

FullGC的话,就是忽略判断新生代还是老年代, 