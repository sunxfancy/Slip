Slip语言概要设计
===============


Slip语言是一门嵌入式lisp方言, 同时也是基于对象的lisp语言, 用lisp的语言特性增强C和C++等底层语言的表达能力, 上层语法层更加简洁, 可以同时使用类似js的语法来定义函数和宏, 改进lisp可读性差的问题.


## 模块设计

Slip语言分为语言核心, 标准库, 用户接口, 三大基本模块. 

而语言核心又包含大量基础组件和实现:

1. 栈式虚拟机内核
2. 基本对象系统
3. GC模块
4. 线程模块
5. 库扩展模块
6. 符号表系统


## 基于表的代码结构

所有的代码,都将在解析后,以表的基本结构储存起来, 表日后也会添加GC功能,是可以被回收的资源
执行时,即是按照lisp的顺序, 依次将各部分压栈, 当做函数调用.

但宏是特殊的, 如果类似是宏, 那么宏可以在内部控制各个参数的解析顺序, 并且可以使用引用阻止解析, 或者重启解析


## 基本类型

int double string list table 


## GC模型

增量型的标记-回收算法, 采用黑白灰三色标记解决问题


## 用户调用接口

提供用户宏或函数的注册接口, 类似Lua的注册机制
让几乎所有的函数调用都会是C函数调用

自己注册的函数会被存储起来, 编译成字节码, 然后调用

## 栈式虚拟机

栈式虚拟机拥有极小的指令集, 主要指令都是类似传递参数, 调用函数等功能, 从lisp源码编译到函数的速度很快. 系统会将编译后的函数代码缓存起来, 为调用时加速准备.


